<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>stat4arch - Correspondence analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">stat4arch</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text">Course overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html"> <i class="bi bi-calendar4" role="img">
</i> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-topics" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Topics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-topics">    
        <li>
    <a class="dropdown-item" href="../../lect/w01/intro.html">
 <span class="dropdown-text">Course introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w01/tidy.html">
 <span class="dropdown-text">Tidy data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w02/intro2r.html">
 <span class="dropdown-text">Coding in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w03/distribs.html">
 <span class="dropdown-text">Summaries and visualization of distributions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w04/rels.html">
 <span class="dropdown-text">Summaries and visualization of relationships</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w05/norm.html">
 <span class="dropdown-text">Normal distribution</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w05/dplyr.html">
 <span class="dropdown-text">Data manipulation with dplyr</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w07/space.html">
 <span class="dropdown-text">Considering space</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w08/time.html">
 <span class="dropdown-text">Considering time</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w09/dist.html">
 <span class="dropdown-text">Distances and similarity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w09/clust.html">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w10/ca.html">
 <span class="dropdown-text">Correspondence analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w11/repro.html">
 <span class="dropdown-text">Reproducibility</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lect/w11/pivoting.html">
 <span class="dropdown-text">Long table and wide table transformations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../project.html"> <i class="bi bi-file-earmark-code" role="img">
</i> 
<span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> <i class="bi bi-gear" role="img">
</i> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kit.html"> <i class="bi bi-patch-question" role="img">
</i> 
<span class="menu-text">Survival kit</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../lect/w10/ca.html">Correspondence analysis</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w01/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w01/tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidy data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w02/intro2r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Coding in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w03/distribs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summaries and visualization of distributions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w04/rels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summaries and visualization of relationships</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w05/norm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Normal distribution</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w05/dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data manipulation with dplyr</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w07/space.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Considering space</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w08/time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Considering time</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w09/dist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Distances and similarity</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w09/clust.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w10/ca.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Correspondence analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w11/repro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducibility</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lect/w11/pivoting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Long table and wide table transformations</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#goals" id="toc-goals" class="nav-link active" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#data-manipulation" id="toc-data-manipulation" class="nav-link" data-scroll-target="#data-manipulation">Data Manipulation</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#combining-different-vectors-with-rbind-and-cbind" id="toc-combining-different-vectors-with-rbind-and-cbind" class="nav-link" data-scroll-target="#combining-different-vectors-with-rbind-and-cbind">Combining different vectors with rbind and cbind</a></li>
  <li><a href="#dataframe" id="toc-dataframe" class="nav-link" data-scroll-target="#dataframe">Dataframe</a></li>
  <li><a href="#square-brackets" id="toc-square-brackets" class="nav-link" data-scroll-target="#square-brackets">Square brackets</a></li>
  <li><a href="#mathematics-in-dataframes" id="toc-mathematics-in-dataframes" class="nav-link" data-scroll-target="#mathematics-in-dataframes">Mathematics in dataframes</a></li>
  <li><a href="#rowsums" id="toc-rowsums" class="nav-link" data-scroll-target="#rowsums">rowSums</a></li>
  <li><a href="#colnames" id="toc-colnames" class="nav-link" data-scroll-target="#colnames">colnames</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise">Exercise</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">Exercise</a></li>
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution">Solution</a></li>
  <li><a href="#correspondence-analysis-ca" id="toc-correspondence-analysis-ca" class="nav-link" data-scroll-target="#correspondence-analysis-ca">Correspondence analysis (CA)</a></li>
  <li><a href="#a-bit-of-theory" id="toc-a-bit-of-theory" class="nav-link" data-scroll-target="#a-bit-of-theory">A bit of theory</a></li>
  <li><a href="#a-simple-contingency-table" id="toc-a-simple-contingency-table" class="nav-link" data-scroll-target="#a-simple-contingency-table">A simple contingency table</a></li>
  <li><a href="#use-of-ca" id="toc-use-of-ca" class="nav-link" data-scroll-target="#use-of-ca">Use of CA</a></li>
  <li><a href="#quick-correspondence-analysis" id="toc-quick-correspondence-analysis" class="nav-link" data-scroll-target="#quick-correspondence-analysis">Quick correspondence analysis</a>
  <ul class="collapse">
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research questions</a></li>
  <li><a href="#materials-and-methods" id="toc-materials-and-methods" class="nav-link" data-scroll-target="#materials-and-methods">Materials and methods</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a></li>
  <li><a href="#now-lets-have-a-closer-look" id="toc-now-lets-have-a-closer-look" class="nav-link" data-scroll-target="#now-lets-have-a-closer-look">Now let’s have a closer look</a></li>
  <li><a href="#the-structure-of-the-ca-result" id="toc-the-structure-of-the-ca-result" class="nav-link" data-scroll-target="#the-structure-of-the-ca-result">The structure of the CA result</a></li>
  <li><a href="#visualising-ca-in-ggplot" id="toc-visualising-ca-in-ggplot" class="nav-link" data-scroll-target="#visualising-ca-in-ggplot">Visualising CA in ggplot</a></li>
  <li><a href="#creating-dataframes" id="toc-creating-dataframes" class="nav-link" data-scroll-target="#creating-dataframes">Creating dataframes</a></li>
  <li><a href="#a-very-simple-ggplot" id="toc-a-very-simple-ggplot" class="nav-link" data-scroll-target="#a-very-simple-ggplot">A very simple ggplot</a></li>
  <li><a href="#advanced-ggplot" id="toc-advanced-ggplot" class="nav-link" data-scroll-target="#advanced-ggplot">Advanced ggplot</a></li>
  <li><a href="#solution-1" id="toc-solution-1" class="nav-link" data-scroll-target="#solution-1">Solution</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/petrpajdla/stat4arch/blob/main/lect/w10/ca.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/petrpajdla/stat4arch/edit/main/lect/w10/ca.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/petrpajdla/stat4arch/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides_ca.html"><i class="bi bi-file-slides"></i>RevealJS</a></li><li><a href="ca.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Correspondence analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="goals" class="level2">
<h2 class="anchored" data-anchor-id="goals">Goals</h2>
<ul>
<li>new ways of data manipulation
<ul>
<li>combining vectors into dataframe</li>
<li>columns, rows and values selection</li>
<li>mathematical operations in rows</li>
</ul></li>
<li>some fancy stuff to make your ggplot look better</li>
<li>introduction to the correspondence analysis in R</li>
</ul>
</section>
<section id="data-manipulation" class="level2" data-background-color="steelblue">
<h2 data-background-color="steelblue" class="anchored" data-anchor-id="data-manipulation">Data Manipulation</h2>
</section>
<section id="vectors" class="level2">
<h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<ul>
<li>you already know <strong>vector</strong> - a combination of several values stored in a single object</li>
</ul>
<div class="incremental">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>cisla <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>cisla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stovky <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">101</span><span class="sc">:</span><span class="dv">110</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>stovky</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 101 102 103 104 105 106 107 108 109 110</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pismena <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>, <span class="st">"g"</span>, <span class="st">"h"</span>, <span class="st">"i"</span>, <span class="st">"j"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>pismena</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"</code></pre>
</div>
</div>
</div>
</section>
<section id="combining-different-vectors-with-rbind-and-cbind" class="level2">
<h2 class="anchored" data-anchor-id="combining-different-vectors-with-rbind-and-cbind">Combining different vectors with rbind and cbind</h2>
<ul>
<li><p>you can combine different vectors into <strong>matrixes</strong> or <strong>dataframes</strong></p></li>
<li><p><code>rbind()</code> combine vectors into <strong>R</strong>ows, <code>cbind()</code> into <strong>C</strong>olumns</p></li>
<li><p>the vectors have to be of the same length!</p></li>
<li><p><code>cbind</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sloupce <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cisla, stovky, pismena)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sloupce, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     cisla stovky pismena
[1,] "1"   "101"  "a"    
[2,] "2"   "102"  "b"    
[3,] "3"   "103"  "c"    
[4,] "4"   "104"  "d"    
[5,] "5"   "105"  "e"    </code></pre>
</div>
</div>
<ul>
<li><code>rbind</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>radky <span class="ot">&lt;-</span> <span class="fu">rbind</span>(cisla, stovky, pismena)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>radky</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9]  [,10]
cisla   "1"   "2"   "3"   "4"   "5"   "6"   "7"   "8"   "9"   "10" 
stovky  "101" "102" "103" "104" "105" "106" "107" "108" "109" "110"
pismena "a"   "b"   "c"   "d"   "e"   "f"   "g"   "h"   "i"   "j"  </code></pre>
</div>
</div>
</section>
<section id="dataframe" class="level2">
<h2 class="anchored" data-anchor-id="dataframe">Dataframe</h2>
<p>You can then very simply create a dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tabulka <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sloupce)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But you have to check whether the numbers are really numbers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tabulka)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   10 obs. of  3 variables:
 $ cisla  : chr  "1" "2" "3" "4" ...
 $ stovky : chr  "101" "102" "103" "104" ...
 $ pismena: chr  "a" "b" "c" "d" ...</code></pre>
</div>
</div>
<p>Whoa! The numbers are not numbers but characters. You will have to fix it by <code>as.numeric()</code> if you want to do mathematical operations. It is also a good practice to always check the structure of your dataframe before carrying out any operations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tabulka<span class="sc">$</span>cisla <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tabulka<span class="sc">$</span>cisla)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>tabulka<span class="sc">$</span>stovky <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tabulka<span class="sc">$</span>stovky)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tabulka)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   10 obs. of  3 variables:
 $ cisla  : num  1 2 3 4 5 6 7 8 9 10
 $ stovky : num  101 102 103 104 105 106 107 108 109 110
 $ pismena: chr  "a" "b" "c" "d" ...</code></pre>
</div>
</div>
</section>
<section id="square-brackets" class="level2">
<h2 class="anchored" data-anchor-id="square-brackets">Square brackets</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena
1     1    101       a
2     2    102       b
3     3    103       c
4     4    104       d</code></pre>
</div>
</div>
<ul>
<li><p>with square brackets <code>[]</code> you can easily select specific columns, rows or cells</p></li>
<li><p><code>your_dataframe[row number, column number]</code></p></li>
<li><p>1st row:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tabulka[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena
1     1    101       a</code></pre>
</div>
</div>
<ul>
<li>1st column:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tabulka[,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<ul>
<li>value in the 1st row and 2nd column:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>tabulka[<span class="dv">1</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 101</code></pre>
</div>
</div>
</section>
<section id="mathematics-in-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="mathematics-in-dataframes">Mathematics in dataframes</h2>
<p>Now you can make some mathematical operations by selecting specific cells with square brackets:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>tabulka[<span class="dv">1</span>,<span class="dv">2</span>] <span class="sc">+</span> tabulka[<span class="dv">2</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 203</code></pre>
</div>
</div>
<p>You can even create a new column with the results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tabulka<span class="sc">$</span>novy_sloupec <span class="ot">&lt;-</span>tabulka[,<span class="dv">1</span>] <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabulka, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena novy_sloupec
1     1    101       a           11
2     2    102       b           12
3     3    103       c           13
4     4    104       d           14</code></pre>
</div>
</div>
<ul>
<li>or alternatilevy use <code>mutate()</code> function from <code>dplyr</code> package</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>tabulka<span class="ot">&lt;-</span><span class="fu">mutate</span>(tabulka, <span class="at">este_jeden_sloupec =</span> tabulka[,<span class="dv">1</span>] <span class="sc">+</span> <span class="dv">100</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabulka,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena novy_sloupec este_jeden_sloupec
1     1    101       a           11                101
2     2    102       b           12                102
3     3    103       c           13                103
4     4    104       d           14                104</code></pre>
</div>
</div>
</section>
<section id="rowsums" class="level2">
<h2 class="anchored" data-anchor-id="rowsums">rowSums</h2>
<ul>
<li>you can calculate sums of specific columuns in each row by <code>rowSums()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tabulka_1 <span class="ot">&lt;-</span> tabulka</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tabulka_1<span class="sc">$</span>sucet <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(tabulka_1[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabulka_1, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena novy_sloupec este_jeden_sloupec sucet
1     1    101       a           11                101   102
2     2    102       b           12                102   104
3     3    103       c           13                103   106
4     4    104       d           14                104   108</code></pre>
</div>
</div>
<ul>
<li>altenative solution in <code>dplyr</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>tabulka <span class="ot">&lt;-</span> tabulka <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sucet =</span> cisla <span class="sc">+</span> stovky)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tabulka,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cisla stovky pismena novy_sloupec este_jeden_sloupec sucet
1     1    101       a           11                101   102
2     2    102       b           12                102   104
3     3    103       c           13                103   106
4     4    104       d           14                104   108</code></pre>
</div>
</div>
</section>
<section id="colnames" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="colnames">colnames</h2>
<ul>
<li>sometimes you will need to select names of the columns to rename them or create specific vector from them</li>
<li>you can manipulate with column names with function <code>colnames()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>nazvy_sloupcu <span class="ot">&lt;-</span> <span class="fu">colnames</span>(tabulka)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>nazvy_sloupcu</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cisla"              "stovky"             "pismena"           
[4] "novy_sloupec"       "este_jeden_sloupec" "sucet"             </code></pre>
</div>
</div>
<p>Let’s have a look on table <code>radky</code>, the colnames look bit strange</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(radky)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         X1  X2  X3  X4  X5  X6  X7  X8  X9 X10
cisla     1   2   3   4   5   6   7   8   9  10
stovky  101 102 103 104 105 106 107 108 109 110
pismena   a   b   c   d   e   f   g   h   i   j</code></pre>
</div>
</div>
<p>Let’s say we will name the columns after the values in <code>pismena</code> row</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(radky)<span class="ot">&lt;-</span> radky[<span class="dv">3</span>,]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(radky, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        a     b     c     d     e     f     g     h     i     j    
cisla   "1"   "2"   "3"   "4"   "5"   "6"   "7"   "8"   "9"   "10" 
stovky  "101" "102" "103" "104" "105" "106" "107" "108" "109" "110"
pismena "a"   "b"   "c"   "d"   "e"   "f"   "g"   "h"   "i"   "j"  </code></pre>
</div>
</div>
<p>You can also remove row used for column names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>radky <span class="ot">&lt;-</span> radky[<span class="sc">-</span><span class="dv">3</span>,]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>radky<span class="ot">&lt;-</span><span class="fu">data.frame</span>(radky)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>radky</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         a   b   c   d   e   f   g   h   i   j
cisla    1   2   3   4   5   6   7   8   9  10
stovky 101 102 103 104 105 106 107 108 109 110</code></pre>
</div>
</div>
</section>
<section id="exercise" class="level2" data-background-color="steelblue">
<h2 data-background-color="steelblue" class="anchored" data-anchor-id="exercise">Exercise</h2>
</section>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">Exercise</h2>
<ol type="1">
<li>copy, paste and run this chunk code from our website:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>datace <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ne.lin"</span>, <span class="st">"ne.lin"</span>, <span class="st">"en.zvo"</span>, <span class="st">"ne.lin"</span>, <span class="st">"en.zvo"</span>, <span class="st">"en.zvo"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>nadoby <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>sipy <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>cu_dycka <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>, <span class="dv">4</span>,<span class="dv">2</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>spondyl <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>kopytovity_klin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>desticka <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>zrnoterka <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>pohrebiste <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datace, nadoby, sipy, cu_dycka, spondyl, kopytovity_klin, desticka, zrnoterka)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>pohrebiste</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  datace nadoby sipy cu_dycka spondyl kopytovity_klin desticka zrnoterka
1 ne.lin      4    0        0       5               4        0         1
2 ne.lin      3    1        0       2               5        0         0
3 en.zvo      7    3        3       0               0        2         0
4 ne.lin      2    0        0       4               4        0         1
5 en.zvo      4    2        4       0               0        1         0
6 en.zvo      3    4        2       0               0        3         0</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>create a new column with the sum of the artefacts found in each grave</li>
<li>create a new column called “ID” where each grave has an unique number</li>
</ol>
</section>
<section id="solution" class="level2">
<h2 class="anchored" data-anchor-id="solution">Solution</h2>
<ol start="2" type="1">
<li>create a new column with the sum of the artefacts found in each grave</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>pohrebiste_2 <span class="ot">&lt;-</span> pohrebiste</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>pohrebiste_2<span class="sc">$</span>pocet_artefaktu <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(pohrebiste[, <span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>pohrebiste_2<span class="sc">$</span>ID <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>pohrebiste_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  datace nadoby sipy cu_dycka spondyl kopytovity_klin desticka zrnoterka
1 ne.lin      4    0        0       5               4        0         1
2 ne.lin      3    1        0       2               5        0         0
3 en.zvo      7    3        3       0               0        2         0
4 ne.lin      2    0        0       4               4        0         1
5 en.zvo      4    2        4       0               0        1         0
6 en.zvo      3    4        2       0               0        3         0
  pocet_artefaktu ID
1              14  1
2              11  2
3              15  3
4              11  4
5              11  5
6              12  6</code></pre>
</div>
</div>
<ul>
<li>alternative solution with package <code>dplyr</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>pohrebiste <span class="ot">&lt;-</span> pohrebiste <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pocet_artefaktu=</span> <span class="fu">rowSums</span>(pohrebiste[,<span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>]),</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">ID =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>))</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pohrebiste, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  datace nadoby sipy cu_dycka spondyl kopytovity_klin desticka zrnoterka
1 ne.lin      4    0        0       5               4        0         1
2 ne.lin      3    1        0       2               5        0         0
3 en.zvo      7    3        3       0               0        2         0
  pocet_artefaktu ID
1              14  1
2              11  2
3              15  3</code></pre>
</div>
</div>
</section>
<section id="correspondence-analysis-ca" class="level2" data-background-color="steelblue">
<h2 data-background-color="steelblue" class="anchored" data-anchor-id="correspondence-analysis-ca">Correspondence analysis (CA)</h2>
</section>
<section id="a-bit-of-theory" class="level2">
<h2 class="anchored" data-anchor-id="a-bit-of-theory">A bit of theory</h2>
<ul>
<li>one of the multivatiate statistical methods</li>
<li>suitable for <strong>contingency tables</strong> (<em>kontingenční tabulka</em>) where you have <strong>counts</strong> of two or more categorical variables</li>
<li>one type of variable are stored in rows, other in columns</li>
<li>typicaly, you can visualise result of CA with scatterplots</li>
</ul>
</section>
<section id="a-simple-contingency-table" class="level2">
<h2 class="anchored" data-anchor-id="a-simple-contingency-table">A simple contingency table</h2>
<ul>
<li>now, have a look at this simple contingency table of an fictional Bell Beaker burial site: one variable is sex of buried individuals (columns), second the position of their bodies (rows)</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">male</th>
<th style="text-align: right;">female</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">left side</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">right side</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>already from the first sight it is obvious that females were predominantly buried on their right site and male on their left site</li>
<li>correspondence analysis will help you when your contingency table have much more variables and the relations between variables are then much harder to observe</li>
</ul>
</section>
<section id="use-of-ca" class="level2">
<h2 class="anchored" data-anchor-id="use-of-ca">Use of CA</h2>
<ul>
<li>typical archaeological uses of CA:
<ul>
<li>seriation</li>
<li>counts of different types of artefacts (eg. artefacts in burial sites, types of chipped stone industry,…)</li>
<li>presence or absence of different features in archaeological collections (e.g.presence or absence of construction elements in graves)</li>
</ul></li>
<li>it works only with <strong>discrete numbers</strong> (<em>celá čísla</em>) - i.e.&nbsp;counts, or <strong>dichotomies</strong> (presence / absence, 1/0)</li>
</ul>
</section>
<section id="quick-correspondence-analysis" class="level2">
<h2 class="anchored" data-anchor-id="quick-correspondence-analysis">Quick correspondence analysis</h2>
<ul>
<li>imagine we have a burial site and want to observe relation between numbers of different types of artefacts found in the graves and between datations of the graves</li>
</ul>
<section id="research-questions" class="level3">
<h3 class="anchored" data-anchor-id="research-questions">Research questions</h3>
<ul>
<li>are there certain types of artefacts related to certain datations?</li>
<li>are there differencies within the different datations?</li>
</ul>
</section>
<section id="materials-and-methods" class="level3">
<h3 class="anchored" data-anchor-id="materials-and-methods">Materials and methods</h3>
<ul>
<li>we will use the fictional data from the last exercise, the dataframe “pohrebiste”</li>
<li>TASKS:
<ul>
<li>clean your workplace and load the “pohrebiste” data from our webpage again</li>
<li>install and load package <code>ca</code></li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  datace nadoby sipy cu_dycka spondyl kopytovity_klin desticka zrnoterka
1 ne.lin      4    0        0       5               4        0         1
2 ne.lin      3    1        0       2               5        0         0
3 en.zvo      7    3        3       0               0        2         0
4 ne.lin      2    0        0       4               4        0         1
5 en.zvo      4    2        4       0               0        1         0
6 en.zvo      3    4        2       0               0        3         0</code></pre>
</div>
</div>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ca)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>ca_vysledek <span class="ot">&lt;-</span> <span class="fu">ca</span>(pohrebiste[,<span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ca_vysledek)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>notice we are running the analysis only with columns which represent number of artefacts (2nd to 8th)</li>
<li>also notice there are two types of points in the plot:
<ul>
<li>blue circles represent row values, which are in this case graves</li>
<li>red triangles represent column values - numbers of specific artefacts</li>
</ul></li>
</ul>
</section>
<section id="interpretation" class="level2">
<h2 class="anchored" data-anchor-id="interpretation">Interpretation</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>there are two clearly distinct groups of graves with distinct types of artefacts</li>
<li>on the other hand number of vessels seems to be indifferent to the groups - both grave groups share similar number of ceramic vessels</li>
<li>the x axis explains 82 % of the difference between graves and artefacts, y axis only 9 %. This mean that the difference between those two groups is bigger then within them. In other words, the difference between e.g.&nbsp;copper dagger (cu_dycka) and spondylus is much much greater then between the copper dagger and arrow heads (sipy)</li>
</ul>
</section>
<section id="now-lets-have-a-closer-look" class="level2">
<h2 class="anchored" data-anchor-id="now-lets-have-a-closer-look">Now let’s have a closer look</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>ca_vysledek</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Principal inertias (eigenvalues):
           1        2        3        4        5       
Value      0.667126 0.069873 0.054181 0.018769 0.001128
Percentage 82.25%   8.61%    6.68%    2.31%    0.14%   


 Rows:
            [,1]      [,2]      [,3]     [,4]      [,5]      [,6]
Mass    0.189189  0.148649  0.202703 0.148649  0.148649  0.162162
ChiDist 0.879868  0.836034  0.738122 1.026842  0.926948  1.011206
Inertia 0.146464  0.103898  0.110437 0.156736  0.127724  0.165817
Dim. 1  1.037358  0.783658 -0.856640 1.225783 -0.979198 -1.083841
Dim. 2  0.450424 -0.963242  0.350276 0.134612  1.561622 -1.635249


 Columns:
           nadoby      sipy  cu_dycka  spondyl kopytovity_klin  desticka
Mass     0.310811  0.135135  0.121622 0.148649        0.175676  0.081081
ChiDist  0.300899  0.875803  1.086977 1.097286        1.064182  1.129904
Inertia  0.028141  0.103653  0.143698 0.178978        0.198950  0.103515
Dim. 1  -0.224254 -0.989256 -1.177308 1.297475        1.221578 -1.212896
Dim. 2   0.489148 -1.259831  1.692644 0.297174       -0.720551 -1.666812
        zrnoterka
Mass     0.027027
ChiDist  1.415361
Inertia  0.054142
Dim. 1   1.385408
Dim. 2   1.106622</code></pre>
</div>
</div>
<ul>
<li>you can see that this is not a dataframe, but a so called “list” with much complicated structure. Even so, it is possible to extract coordinates of the points (we will show it later) and use them for other analysis or visualisation in ggplot.</li>
</ul>
</section>
<section id="the-structure-of-the-ca-result" class="level2">
<h2 class="anchored" data-anchor-id="the-structure-of-the-ca-result">The structure of the CA result</h2>
<ul>
<li>this looks even more complicated, but don’t worry!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ca_vysledek)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 16
 $ sv        : num [1:5] 0.8168 0.2643 0.2328 0.137 0.0336
 $ nd        : logi NA
 $ rownames  : NULL
 $ rowmass   : num [1:6] 0.189 0.149 0.203 0.149 0.149 ...
 $ rowdist   : num [1:6] 0.88 0.836 0.738 1.027 0.927 ...
 $ rowinertia: num [1:6] 0.146 0.104 0.11 0.157 0.128 ...
 $ rowcoord  : num [1:6, 1:5] 1.037 0.784 -0.857 1.226 -0.979 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:5] "Dim1" "Dim2" "Dim3" "Dim4" ...
 $ rowsup    : logi(0) 
 $ colnames  : chr [1:7] "nadoby" "sipy" "cu_dycka" "spondyl" ...
 $ colmass   : num [1:7] 0.311 0.135 0.122 0.149 0.176 ...
 $ coldist   : num [1:7] 0.301 0.876 1.087 1.097 1.064 ...
 $ colinertia: num [1:7] 0.0281 0.1037 0.1437 0.179 0.1989 ...
 $ colcoord  : num [1:7, 1:5] -0.224 -0.989 -1.177 1.297 1.222 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:7] "nadoby" "sipy" "cu_dycka" "spondyl" ...
  .. ..$ : chr [1:5] "Dim1" "Dim2" "Dim3" "Dim4" ...
 $ colsup    : logi(0) 
 $ N         : num [1:6, 1:7] 4 3 7 2 4 3 0 1 3 0 ...
 $ call      : language ca.matrix(obj = as.matrix(obj))
 - attr(*, "class")= chr "ca"</code></pre>
</div>
</div>
</section>
<section id="visualising-ca-in-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="visualising-ca-in-ggplot">Visualising CA in ggplot</h2>
<ul>
<li>in order to visualize data in ggplot, they have to be in dataframe format</li>
<li>so the first step will be extracting coordinates from the CA result</li>
<li>in this case we will extract them from first two dimensions only</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> ca_vysledek<span class="sc">$</span>rowcoord[,<span class="dv">1</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> ca_vysledek<span class="sc">$</span>rowcoord[,<span class="dv">2</span>]</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> ca_vysledek<span class="sc">$</span>colcoord[,<span class="dv">1</span>]</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>y2 <span class="ot">&lt;-</span> ca_vysledek<span class="sc">$</span>colcoord[,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>x1 and x2 represent coordinates of row values (graves), y1 and y2 represent column values (artefacts)</p></li>
<li><p>quick check:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x1,x2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="creating-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="creating-dataframes">Creating dataframes</h2>
<ul>
<li><p>now we need to create dataframes with for both row values and column values</p></li>
<li><p>row values (graves):</p>
<ul>
<li>in this step, we can combine various variables describing your objects with row values. We have added “id” and “datace”</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>datace <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pohrebiste<span class="sc">$</span>datace)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pohrebiste<span class="sc">$</span>ID)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>coord_datace <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(datace, x1,x2, id))</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(coord_datace) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Datace"</span>, <span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"ID"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(coord_datace, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Datace         X1         X2 ID
1 ne.lin  1.0373584  0.4504244  1
2 ne.lin  0.7836584 -0.9632417  2
3 en.zvo -0.8566397  0.3502757  3
4 ne.lin  1.2257826  0.1346118  4</code></pre>
</div>
</div>
<ul>
<li>column values (artefacts):</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>artefakty <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">colnames</span>(pohrebiste[,<span class="dv">2</span><span class="sc">:</span><span class="dv">8</span>]))</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>coord_artefakty <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(y1, y2))</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>coord_artefakty<span class="sc">$</span>artefakty <span class="ot">&lt;-</span> <span class="fu">rownames</span>(coord_artefakty)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(coord_artefakty) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Y1"</span>, <span class="st">"Y2"</span>,<span class="st">"Artefakty"</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(coord_artefakty) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(coord_artefakty, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Y1         Y2 Artefakty
1 -0.2242544  0.4891476    nadoby
2 -0.9892557 -1.2598313      sipy
3 -1.1773081  1.6926442  cu_dycka
4  1.2974752  0.2971739   spondyl</code></pre>
</div>
</div>
</section>
<section id="a-very-simple-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="a-very-simple-ggplot">A very simple ggplot</h2>
<ul>
<li>lets have a quick ggplot</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> coord_datace, <span class="fu">aes</span>(X1, X2, <span class="at">color =</span> Datace))<span class="sc">+</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> coord_artefakty, <span class="fu">aes</span>(Y1, Y2), <span class="at">shape =</span> <span class="dv">17</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>notice there are 2 types of values in 2 dataframes, so you need to call <code>geom_point()</code> two times</li>
<li>in ggplot we can also easily distinguish different datations by color</li>
</ul>
</section>
<section id="advanced-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="advanced-ggplot">Advanced ggplot</h2>
<ul>
<li>now you can play more with adjusting the plot</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="solution-1" class="level2">
<h2 class="anchored" data-anchor-id="solution-1">Solution</h2>
<ul>
<li>you can add text to your ggplot by <code>geom_text()</code></li>
<li>you can also rename plot labels without the need to rename variables in your original dataframe. To do so, create a vector with label names and then specify it in <code>geom_text(...,aes(label=your_vector))</code></li>
<li>for more tips how to adjust text see <a href="https://ggplot2.tidyverse.org/reference/geom_text.html">ggplot2.tidyverse.org</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>labels_artefacts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"nádoba"</span>, <span class="st">"hrot šípu"</span>, <span class="st">"mědená dýčka"</span>, <span class="st">"spondylus"</span>, <span class="st">"kopytovitý klin"</span>, <span class="st">"nátepní destička"</span>, <span class="st">"zrnotěrka"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">color=</span><span class="st">"gray80"</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color=</span><span class="st">"gray80"</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)<span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> coord_datace, <span class="fu">aes</span>(X1, X2, <span class="at">colour =</span> Datace), <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> coord_artefakty, <span class="fu">aes</span>(Y1, Y2), <span class="at">shape =</span> <span class="dv">17</span>, <span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> coord_artefakty, <span class="fu">aes</span>(<span class="at">label =</span> labels_artefacts, <span class="at">x=</span>Y1, <span class="at">y=</span>Y2), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> coord_datace, <span class="fu">aes</span>(<span class="at">label =</span> ID, <span class="at">x=</span>X1, <span class="at">y=</span>X2), <span class="at">vjust =</span> <span class="fl">1.75</span>)<span class="sc">+</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.5</span>, <span class="fl">1.6</span>)<span class="sc">+</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">1.75</span>, <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Dimenze 1 - 82,3 %"</span>, <span class="at">y=</span><span class="st">"Dimenze 2 - 8,6 %"</span>,</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Korespondenční analýza fiktivního pohřebiště"</span>)<span class="sc">+</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ca_files/figure-revealjs/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/petrpajdla\.github\.io\/stat4arch\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org/">
<p>Build with quarto.</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
<p>Licenses: MIT (code) &amp; CC BY-SA 4.0 Int. (other content).</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/petrpajdla/stat4arch/blob/main/lect/w10/ca.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/petrpajdla/stat4arch/edit/main/lect/w10/ca.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/petrpajdla/stat4arch/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/petrpajdla/stat4arch/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>