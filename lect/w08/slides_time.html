<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.24">

  <title>stat4arch – Considering time</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-0bf6ac650f44675368106b5949c85461.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Considering time</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="goals" class="slide level2" data-background-color="#FAF1A4">
<h2>Goals</h2>
<ul>
<li>methods of temporal analysis
<ul>
<li>calibration of radiocarbon data</li>
<li>working with temporal uncertainties - introduction to the aoristic method</li>
</ul></li>
<li>R
<ul>
<li>joining 2 tables</li>
<li>creating a new variable based on condition in different variable</li>
<li>some tips and tricks for your ggplot</li>
</ul></li>
</ul>
</section>
<section id="radiocarbon-dating" class="slide level2" data-background-color="#B5E2FF">
<h2>Radiocarbon dating</h2>
</section>
<section id="evocation" class="slide level2">
<h2>Evocation</h2>
<ul>
<li>What’s the difference between <em>absolute</em> dating and <em>relative</em> dating?</li>
<li>How the archaeologists estimated absolute dates before invention of the radiocarbon dating?</li>
<li>Can you tell other methods of absolute dating?</li>
</ul>
</section>
<section id="how-rc-dating-works" class="slide level2">
<h2>How RC dating works</h2>
<h3 id="a-very-simple-introduction">A very simple introduction</h3>
<ul>
<li>It is based on measurement of proportion of radioactive 14C in organic material.</li>
<li>Plants are absorbing 14C from atmosphere which then continues to animals and humans through food chain.</li>
<li>After the dead of the organism the 14C starts to decay, and by measuring proportion of the 14C still in the body and comparing it with the amount of 14C in atmosphere, we can measure <strong>time when the organism died</strong>.</li>
<li>Since the amount of the 14C in atmosphere varies during time, we need to calibrate the results with so called “calibration curve”.</li>
<li>Keep in mind that we are not dating a date of creation of the archaeological context, but date of the death of the organism, be it human individual, grain, or a tree.</li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>

<img data-src="./figs/carbon.jpg" class="r-stretch"><p>For more information, see:</p>
<ul>
<li>Bayliss, A, and Marshall, P, 2022 <a href="https://historicengland.org.uk/images-books/publications/radiocarbon-dating-chronological-modelling/heag312-radiocarbon-dating/">Radiocarbon Dating and Chronological Modelling: Guidelines and Best Practice</a></li>
<li>Renfrew, C., &amp; Bahn, P.G. 1998. <a href="https://katalog.muni.cz/Record/MUB01006519482">Archaeology: theories, methods and practice</a></li>
</ul>
</section>
<section id="todays-dataset" class="slide level2">
<h2>Today’s dataset</h2>
<h3 id="lasoles">LASOLES</h3>
<p>Let’s try to calibrate some radiocarbon data!</p>
<p>We will do so with the same data as last time, from the LASOLES radiocarbon database of the Czech Republic.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a>df_lasoles <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"./data/LASOLES_14C_database.csv"</span>, <span class="at">sep =</span> <span class="st">";"</span>)</span>
<span id="cb1-5"><a></a></span>
<span id="cb1-6"><a></a>df_lasoles<span class="sc">$</span>Age14C <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_lasoles<span class="sc">$</span>Age14C)</span>
<span id="cb1-7"><a></a>df_lasoles<span class="sc">$</span>SD14C <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_lasoles<span class="sc">$</span>SD14C)</span>
<span id="cb1-8"><a></a></span>
<span id="cb1-9"><a></a><span class="fu">head</span>(df_lasoles[, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>], <span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID_Date   Lab_code Laboratory Age14C SD14C    Date_type Delta_13C
1   CzArch_1  Poz-41673        Poz   3345    30 conv. 14C BP          
2   CzArch_5      A-215          A   3040    45 conv. 14C BP          
3   CzArch_6    Bln-102        Bln   6285   100 conv. 14C BP          
4   CzArch_7   Bln-102a        Bln   6405   100 conv. 14C BP          
5  CzArch_11   Bln-1165        Bln   4670    80 conv. 14C BP          
6  CzArch_12   Bln-1166        Bln   4670    80 conv. 14C BP          
7  CzArch_13   Bln-1167        Bln   2525    80 conv. 14C BP          
8  CzArch_14 Bln-1167-A        Bln   2440    80 conv. 14C BP          
9  CzArch_15    Bln-118        Bln    665   100 conv. 14C BP          
10 CzArch_16   Bln-1244        Bln   4955    80 conv. 14C BP          
11 CzArch_17   Bln-1396        Bln   4770    60 conv. 14C BP          
12 CzArch_18 Bln-1396-A        Bln   4775    60 conv. 14C BP          </code></pre>
</div>
</div>
</section>
<section id="quick-calibration" class="slide level2">
<h2>Quick calibration</h2>
<ul>
<li>We will use a real radiocarbon date sampled from a Final Eneolihic – Early Bronze Age site Pavlov u Dolních Věstonic, “Horní pole”.</li>
<li>We will use package <code>rcarbon</code> and calibration curve <a href="https://www.cambridge.org/core/journals/radiocarbon/article/intcal20-northern-hemisphere-radiocarbon-age-calibration-curve-055-cal-kbp/83257B63DC3AF9CFA6243F59D7503EFF">IntCal20</a></li>
</ul>
<h3 id="details">Details</h3>
<ul>
<li>uncalibrated date: <strong>3990</strong></li>
<li>standart deviation: <strong>54</strong></li>
</ul>
<h4 id="additional-information">Additional information</h4>
<ul>
<li>laboratory code: Erl-4719</li>
<li>typochronological datation: Bell Beaker Culture</li>
<li>archaeological context: grave</li>
<li>sample: human bone</li>
</ul>
</section>
<section id="quick-calibration-1" class="slide level2">
<h2>Quick calibration</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="co"># install.packages("rcarbon")</span></span>
<span id="cb3-2"><a></a><span class="fu">library</span>(rcarbon)</span>
<span id="cb3-3"><a></a>cal_date <span class="ot">&lt;-</span> <span class="fu">calibrate</span>(<span class="at">x =</span> <span class="dv">3990</span>, <span class="at">errors =</span> <span class="dv">54</span>, <span class="at">calCurves =</span> <span class="st">"intcal20"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">summary</span>(cal_date)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  DateID MedianBP OneSigma_BP_1 OneSigma_BP_2 OneSigma_BP_3 TwoSigma_BP_1
1      1     4464  4565 to 4562  4528 to 4406  4364 to 4360  4783 to 4768
  TwoSigma_BP_2 TwoSigma_BP_3 TwoSigma_BP_4
1  4614 to 4596  4583 to 4288  4272 to 4250</code></pre>
</div>
</div>
<p>Median of the calibrated date is <strong>4464 BP</strong></p>
</section>
<section id="quick-plot" class="slide level2">
<h2>Quick plot</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">plot</span>(cal_date)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-8-1.png" width="672" class="r-stretch"></section>
<section id="improving-your-plot" class="slide level2">
<h2>Improving your plot</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">plot</span>(cal_date, <span class="at">calendar =</span> <span class="st">"BCAD"</span>, <span class="at">HPD =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-9-1.png" width="672" class="r-stretch"><ul>
<li>argument <code>HPD</code> higlights confidence of the posterior density, by default set to 95% (2 standard deviations)</li>
</ul>
</section>
<section id="why-i-cant-get-single-bce-number" class="slide level2">
<h2>Why I can’t get single BCE number?</h2>

<img data-src="time_files/figure-html/unnamed-chunk-10-1.png" width="672" class="r-stretch"></section>
<section id="plotting-multiple-samples" class="slide level2 scrollable">
<h2>Plotting multiple samples</h2>
<ul>
<li>let’s create a subset with samples from our site, dated to the Final Eneolithic and Early Bronze Age and having no dating errors</li>
<li>copy and paste this code from our web:</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>df_sample_site <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">filter</span>(Civil_parish <span class="sc">==</span> <span class="st">"Pavlov u Dolních Věstonic"</span> <span class="sc">&amp;</span> </span>
<span id="cb8-3"><a></a>         Site_name <span class="sc">==</span> <span class="st">"Horní pole"</span> <span class="sc">&amp;</span> </span>
<span id="cb8-4"><a></a>         Age14C <span class="sc">&gt;</span> <span class="dv">3500</span> <span class="sc">&amp;</span> </span>
<span id="cb8-5"><a></a>         Age14C <span class="sc">&lt;</span> <span class="dv">5000</span> <span class="sc">&amp;</span> </span>
<span id="cb8-6"><a></a>         Dating_error <span class="sc">==</span> <span class="st">"n"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>cal_dates <span class="ot">&lt;-</span> <span class="fu">calibrate</span>(<span class="at">x =</span> df_sample_site<span class="sc">$</span>Age14C, <span class="at">errors =</span> df_sample_site<span class="sc">$</span>SD14C, <span class="at">calCurves =</span> <span class="st">"intcal20"</span>, <span class="at">ids =</span> df_sample_site<span class="sc">$</span>Lab_code) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="fu">head</span>(<span class="fu">summary</span>(cal_dates),<span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    DateID MedianBP OneSigma_BP_1 OneSigma_BP_2 OneSigma_BP_3 OneSigma_BP_4
1 Erl-4709     4240  4383 to 4374  4352 to 4329  4297 to 4150      NA to NA
2 Erl-4710     4267  4398 to 4372  4353 to 4328  4299 to 4225  4204 to 4155
3 Erl-4714     4107  4228 to 4202  4156 to 4067  4046 to 3987      NA to NA
4 Erl-4715     4125  4232 to 4199  4183 to 4167  4159 to 4080  4037 to 3994
  OneSigma_BP_5 TwoSigma_BP_1 TwoSigma_BP_2 TwoSigma_BP_3 TwoSigma_BP_4
1      NA to NA  4411 to 4141  4130 to 4091      NA to NA      NA to NA
2      NA to NA  4412 to 4148  4116 to 4098      NA to NA      NA to NA
3      NA to NA  4343 to 4338  4292 to 3960  3950 to 3924      NA to NA
4      NA to NA  4349 to 4332  4295 to 3970  3944 to 3930      NA to NA</code></pre>
</div>
</div>
</section>
<section id="multiplot" class="slide level2">
<h2>Multiplot</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">multiplot</span>(cal_dates, <span class="at">decreasing=</span><span class="cn">TRUE</span>, <span class="at">HPD=</span><span class="cn">TRUE</span>, <span class="at">label.pos=</span><span class="fl">0.9</span>, <span class="at">label.offset=</span><span class="sc">-</span><span class="dv">200</span>,  <span class="at">calendar =</span> <span class="st">"BCAD"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-14-1.png" width="672" class="r-stretch"></section>
<section id="radiocarbon-dates-as-proxies-for-human-demography" class="slide level2">
<h2>Radiocarbon dates as proxies for human demography</h2>
<ul>
<li>in recent years, radiocarbon data are being widely used for determining relative demography</li>
<li>different methods, e.g.&nbsp;summed probability distribution (SPD) or kernel density estimation (KDE)</li>
</ul>

<img data-src="./figs/spd.jpg" class="r-stretch quarto-figure-center"><p class="caption">SPD, From Kolář, J., Macek, M., Tkáč, P., Novák, D., &amp; Abraham, V. 2022. Long-term demographic trends and spatio-temporal distribution of past human activity in Central Europe: Comparison of archaeological and palaeoecological proxies. Quaternary Science Reviews 297: p.107834</p></section>
<section id="rc-dates-as-proxies-for-demography" class="slide level2">
<h2>RC Dates as proxies for demography</h2>

<img data-src="./figs/spd_model.jpg" class="r-stretch quarto-figure-center"><p class="caption">SPD - model, From Kolář, J., Macek, M., Tkáč, P., Novák, D., &amp; Abraham, V. 2022. Long-term demographic trends and spatio-temporal distribution of past human activity in Central Europe: Comparison of archaeological and palaeoecological proxies. Quaternary Science Reviews 297: p.107834.</p></section>
<section id="where-to-find-more-info" class="slide level2">
<h2>Where to find more info</h2>
<p>This <a href="https://cran.r-project.org/web/packages/rcarbon/vignettes/rcarbon.html">article</a> provides step-by-step instruction for plenty other analyses, e.g.&nbsp;SPD</p>

<img data-src="./figs/lekce8_fig1.png" class="r-stretch"></section>
<section id="other-packages-for-radiocarbon-data" class="slide level2">
<h2>Other packages for radiocarbon data</h2>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/oxcAAR/vignettes/basic-usage.html">oxcAAR</a> - R interface for <a href="https://c14.arch.ox.ac.uk/">Oxcal</a></p></li>
<li><p><a href="https://andrewcparnell.github.io/Bchron/index.html">Bchron</a> - for Bayesian modeling</p></li>
<li><p><a href="https://github.com/joeroe/c14">c14</a> - package for “tidy” workflow with 14C data (in experimental phase)</p></li>
<li><p><a href="https://github.com/ropensci/c14bazAAR">c14bazAAR</a> - archive of different open access radiocarbon databases</p></li>
<li><p><a href="https://stratigraphr.joeroe.io/">stratigraphr</a> - package for stratigraphy and chronology</p></li>
</ul>
</section>
<section id="exercise" class="slide level2" data-background-color="#B5E2FF">
<h2>Exercise</h2>
<ol type="1">
<li>Clean your workspace, create a new script in your project folder, load the database <a href="./data/LASOLES_14C_database.csv">LASOLES</a>.</li>
<li>Create a new dataframe with data from burial site <em>Vedrovice - Široká u lesa</em>, dated to <em>Linear Pottery Culture</em>.</li>
<li>Calibrate all the data and create a multiplot.</li>
</ol>
<p><strong>Hints</strong>: ne.lin, filter(), multiplot()</p>
</section>
<section id="working-with-temporal-uncertainties" class="slide level2" data-background-color="#B5E2FF">
<h2>Working with temporal uncertainties</h2>
</section>
<section id="problem" class="slide level2">
<h2>Problem</h2>
<ul>
<li>Imagine you are trying to model intensity of human occupation in longer time period by quantifing archaeological contexts but you are struggling with the problem how to compare contexts with various accuracy of their dating.</li>
<li>E.g. some contexts are dated vaguely to “neolithic period” because the only artefact found there was a culturaly insignificant polished axe. And on the contrary, other contexts are dated to shorter periods such as “Stroked Pottery Culture period” (<em>vypíchaná ker.</em>) thanks to finds of recognizable ornamented pottery.</li>
</ul>
</section>
<section id="section-1" class="slide level2">
<h2></h2>

<img data-src="./figs/meme.png" data-fig-width="80%" class="r-stretch"></section>
<section id="section-2" class="slide level2">
<h2></h2>

<img data-src="time_files/figure-html/unnamed-chunk-16-1.png" width="672" class="r-stretch"></section>
<section id="aoristic-method" class="slide level2">
<h2>Aoristic method</h2>
<ul>
<li><p>will help us with overcoming difficulties with temporal uncertainties</p></li>
<li><p>see <a href="https://link.springer.com/article/10.1007/s10816-011-9122-3">Crema, E.R. 2012</a> for more details</p></li>
<li><p>what we need:</p>
<ul>
<li>for every archaeological context we need a typo-chronological datation and start date and end date of each of these datations, such as in example below:</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  context_number context_dating_AMCR date_start date_end
1           pit1              ne.lin      -5400    -4801
2           pit2              neolit      -5400    -4301
3           pit3              ne.lin      -5300    -4801
4         grave1              ne.lin      -5300    -4801</code></pre>
</div>
</div>
</section>
<section id="joining-two-tables-together" class="slide level2">
<h2>Joining two tables together</h2>
<ul>
<li>for the sake of the simplicity and for these educational purposes, we will work with LASOLES database as if it does not consists of radiocarbon samples but of contexts of these samples dated typo-chronologicaly to various periods</li>
<li>but since LASOLES does not have variables with information about start and end date, we will need to get those information from another datase - <a href="./data/datation_mor.csv">datation_mor.csv</a></li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>df_datations <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"datation_mor.csv"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">head</span>(df_datations,<span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  kultura date_start date_end
1  mezoli      -9600    -5401
2  ne.lin      -5400    -4801
3   ne-en      -5400    -2001
4  neolit      -5400    -4301</code></pre>
</div>
</div>
<ul>
<li>now we need to add variables date_start and date_end to dataframe df_lasoles. We will do so by joining the two tables through variables “kultura” and “Contex_dating_AMCR” by command <code>right_join</code></li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>df_lasoles <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a></a>  <span class="fu">right_join</span>(df_datations, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Contex_dating_AMCR"</span> <span class="ot">=</span> <span class="st">"kultura"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>df_lasoles<span class="sc">$</span>date_start <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_lasoles<span class="sc">$</span>date_start)</span>
<span id="cb18-2"><a></a>df_lasoles<span class="sc">$</span>date_end <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df_lasoles<span class="sc">$</span>date_end)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>see <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">documentation</a> for different types of joins</li>
</ul>
</section>
<section id="saving-your-new-dataframe" class="slide level2">
<h2>Saving your new dataframe</h2>
<p>You can save your new dataframe now so you don’t need to join the tables again next time:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">write.csv</span>(df_lasoles, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"df_lasoles2.csv"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="calculation-of-the-aoristic-sum" class="slide level2">
<h2>Calculation of the aoristic sum</h2>
<p>Package - <code>aoristAAR</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">'devtools'</span>)) <span class="fu">install.packages</span>(<span class="st">'devtools'</span>)</span>
<span id="cb20-2"><a></a></span>
<span id="cb20-3"><a></a><span class="fu">library</span>(devtools)</span>
<span id="cb20-4"><a></a><span class="fu">install_github</span>(<span class="st">'ISAAKiel/aoristAAR'</span>)</span>
<span id="cb20-5"><a></a></span>
<span id="cb20-6"><a></a><span class="fu">library</span>(aoristAAR)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Calculation:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">library</span>(aoristAAR)</span>
<span id="cb21-2"><a></a></span>
<span id="cb21-3"><a></a>aori <span class="ot">&lt;-</span> <span class="fu">aorist</span>(df_lasoles, <span class="at">from =</span> <span class="st">"date_start"</span>, <span class="at">to =</span> <span class="st">"date_end"</span>, <span class="at">method =</span> <span class="st">"period_correction"</span>, <span class="at">stepwidth =</span> <span class="dv">1</span>)</span>
<span id="cb21-4"><a></a></span>
<span id="cb21-5"><a></a><span class="fu">head</span>(aori, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
   date    sum
  &lt;int&gt;  &lt;dbl&gt;
1 -9600 0.0217
2 -9599 0.0217
3 -9598 0.0217
4 -9597 0.0217</code></pre>
</div>
</div>
</section>
<section id="plot" class="slide level2">
<h2>Plot</h2>
<p>Quick plot:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb23-2"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-26-1.png" width="672" class="r-stretch"></section>
<section id="improving-your-plot-1" class="slide level2">
<h2>Improving your plot</h2>
<ul>
<li>command <code>geom_vline</code> adds vertical line on coordinates defined by you</li>
<li>in this case, we mark -5400 BCE</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb24-2"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum))<span class="sc">+</span></span>
<span id="cb24-3"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="sc">-</span><span class="dv">5400</span>, <span class="at">color =</span> <span class="st">"red"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-27-1.png" width="672" class="r-stretch"></section>
<section id="but-why-stop-here" class="slide level2">
<h2>But why stop here?</h2>
<ul>
<li>lets mark the periods in your plot and divide the x-axis by 1000 years!</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>periods <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">9600</span>, <span class="sc">-</span><span class="dv">5400</span>, <span class="sc">-</span><span class="dv">4300</span>, <span class="sc">-</span><span class="dv">2200</span>, <span class="sc">-</span><span class="dv">800</span>, <span class="sc">-</span><span class="dv">480</span>, <span class="sc">-</span><span class="dv">30</span>, <span class="dv">581</span>)</span>
<span id="cb25-2"><a></a>marks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10000</span>, <span class="dv">1500</span>, <span class="at">by =</span> <span class="dv">1000</span>)</span>
<span id="cb25-3"><a></a></span>
<span id="cb25-4"><a></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb25-5"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> periods, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb25-6"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum))<span class="sc">+</span></span>
<span id="cb25-7"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> marks)<span class="sc">+</span> </span>
<span id="cb25-8"><a></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"BCE/AD"</span>, <span class="at">y=</span><span class="st">"aoristic sum"</span>)<span class="sc">+</span></span>
<span id="cb25-9"><a></a>  <span class="fu">theme_light</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-28-1.png" width="672" class="r-stretch"><ul>
<li>notice that when we’ve changed the order of the lines so the later overlaps the earlier</li>
<li>for the sake of simplicity, we will ignore the year “0” which should not exist</li>
</ul>
</section>
<section id="grouping-areals-into-broader-categories" class="slide level2 scrollable">
<h2>Grouping areals into broader categories</h2>
<p>What if we want to observe differences in aoristic sum for different site category? For example settlements versus burial sites?</p>
<ul>
<li>first, we can check how many different site categories are being used</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">unique</span>(df_lasoles<span class="sc">$</span>Site_category_ENG)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "hillfort"                  "settlement"               
 [3] "unpublished"               "large circular enclosure" 
 [5] "burial ground"             "settlement-exp"           
 [7] "cave or abri"              "extraction site"          
 [9] "ritual site"               "enclosure"                
[11] "tumuli"                    "hoard other"              
[13] "secondary find"            "hoard of bronze artefacts"
[15] "single find"               "military camp"            
[17] "hoard of ceramic vessels"  NA                         </code></pre>
</div>
</div>
<p>There are too many areals for any usefull visualisation, so we need to group them to broader categories. For example burial grounds and tumuli will be in one category only.</p>
<ul>
<li>first step is creating vectors of site categories:</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>l_settlements <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"settlement"</span>, <span class="st">"hillfort"</span>, <span class="st">"settlement-exp"</span>, <span class="st">"military camp"</span>, <span class="st">"large circular enclosure"</span>, <span class="st">"enclosure"</span>)</span>
<span id="cb28-2"><a></a>l_burials <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"burial ground"</span>, <span class="st">"tumuli"</span>)</span>
<span id="cb28-3"><a></a>l_hoards <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hoard of a bronze artefacts"</span>, <span class="st">"hoard other"</span>, <span class="st">"hoard of ceramic vessels"</span>)</span>
<span id="cb28-4"><a></a>l_other <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"single find"</span>, <span class="st">"cave or abri"</span>, <span class="st">"secondary find"</span>, <span class="st">"extraction site"</span>, <span class="st">"unpublished"</span>,<span class="st">"ritual_site"</span> )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>then with the help of <code>mutate</code> will create a new variable “new_category”</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>df_lasoles <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a></a>  <span class="fu">mutate</span>(<span class="at">new_category =</span> <span class="fu">ifelse</span>(Site_category_ENG <span class="sc">%in%</span> l_settlements, <span class="st">"settlements"</span>,</span>
<span id="cb29-3"><a></a>                <span class="fu">ifelse</span>(Site_category_ENG <span class="sc">%in%</span> l_burials, <span class="st">"burials"</span>,</span>
<span id="cb29-4"><a></a>                       <span class="fu">ifelse</span>(Site_category_ENG <span class="sc">%in%</span> l_hoards, <span class="st">"hoards"</span>,</span>
<span id="cb29-5"><a></a>                              <span class="fu">ifelse</span>(Site_category_ENG <span class="sc">%in%</span> l_other, <span class="st">"other"</span>,</span>
<span id="cb29-6"><a></a>                                     <span class="st">"no-data"</span>)))))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="aoristic-for-different-categories" class="slide level2">
<h2>Aoristic for different categories</h2>
<p>Now we can create aoristic sum for each new site category. Let’s try it for settlements and burials:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>df_settlements <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a></a>  <span class="fu">filter</span>(new_category <span class="sc">==</span> <span class="st">"settlements"</span>)</span>
<span id="cb30-3"><a></a>df_burials <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a></a>  <span class="fu">filter</span>(new_category <span class="sc">==</span> <span class="st">"burials"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>aori_settlements <span class="ot">&lt;-</span> <span class="fu">aorist</span>(df_settlements, <span class="at">from =</span> <span class="st">"date_start"</span>, <span class="at">to =</span> <span class="st">"date_end"</span>, <span class="at">method =</span> <span class="st">"period_correction"</span>, <span class="at">stepwidth =</span> <span class="dv">1</span>)</span>
<span id="cb31-2"><a></a>aori_burials <span class="ot">&lt;-</span> <span class="fu">aorist</span>(df_burials, <span class="at">from =</span> <span class="st">"date_start"</span>, <span class="at">to =</span> <span class="st">"date_end"</span>, <span class="at">method =</span> <span class="st">"period_correction"</span>, <span class="at">stepwidth =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb32-2"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori_settlements, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum), <span class="at">color =</span> <span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb32-3"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori_burials, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum), <span class="at">color =</span> <span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb32-4"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> marks)<span class="sc">+</span> </span>
<span id="cb32-5"><a></a>  <span class="fu">theme_light</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-34-1.png" width="672" class="r-stretch"></section>
<section id="easy-subseting" class="slide level2">
<h2>Easy subseting</h2>
<ul>
<li>you can create similar subsets without creating a new variable:</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>l_enclosures <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"large circular enclosure"</span>, <span class="st">"enclosure"</span>)</span>
<span id="cb33-2"><a></a></span>
<span id="cb33-3"><a></a>df_enclosures <span class="ot">&lt;-</span> df_lasoles <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a></a>  <span class="fu">filter</span>(Site_category_ENG <span class="sc">%in%</span> l_enclosures)</span>
<span id="cb33-5"><a></a></span>
<span id="cb33-6"><a></a>aori_encl <span class="ot">&lt;-</span> <span class="fu">aorist</span>(df_enclosures, <span class="at">from =</span> <span class="st">"date_start"</span>, <span class="at">to =</span> <span class="st">"date_end"</span>, <span class="at">method =</span> <span class="st">"period_correction"</span>, <span class="at">stepwidth =</span> <span class="dv">1</span>)</span>
<span id="cb33-7"><a></a></span>
<span id="cb33-8"><a></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb33-9"><a></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> aori_encl, <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y=</span>sum))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

</div>
<img data-src="time_files/figure-html/unnamed-chunk-35-1.png" width="672" class="r-stretch"></section>
<section id="exercise-1" class="slide level2">
<h2>Exercise</h2>
<ol type="1">
<li>clean your workspace, create new script, load either the new lasoles table (with end and start dates) or the old one, but then join it with datation table</li>
<li>create a dataframe of fortificated areas, consisting of hillforts, elevated settlements (settlement-exp) and military camps</li>
<li>calculate an aoristic sum for these fortificated areas and show it in ggplot</li>
<li>add marks to your ggplot visualizing the start and the end of the Iron age period (-800 and -21 BCE)</li>
<li>create a map of those fortified areas in the Czech republic (you will need to create a <code>sf</code> file and load “republika” from <code>RCzechia</code>)</li>
<li>create the same map, but only in Olomoucký kraj</li>
</ol>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://petrpajdla.github.io/stat4arch/">AES_707</a> <em>Statistics seminar for archaeologists</em> | <a href="./time.html">Time</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"theme":"whiteboard","chalkEffect":0},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/petrpajdla\.github\.io\/stat4arch\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>