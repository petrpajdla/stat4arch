{
  "hash": "5c32da2995eaf941ad8bf088f8891b8b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Summaries and visualization of distributions\"\nformat:\n  html: default\n  revealjs:\n    fontsize: 24px\n    output-file: slides_distribs.html\n    footer: \"[AES_707](https://petrpajdla.github.io/stat4arch/) *Statistics seminar for archaeologists* | [Distributions](./distribs.html)\"\n    chalkboard:\n      theme: whiteboard\n      chalk-effect: 0.0\n  pdf: default\nexecute:\n  echo: true\n  warning: false\n---\n\n\n\n\n## Reflection on the last week {background-color=\"#FAF1A4\"}\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## Objectives\n\nAt the end of the lecture, you will know how to..\n\n::: {.incremental}\n- Organize your **code in scripts**.\n- Organize your **work in projects**.\n- Count and interpret descriptive statics **characterizing central tendency** of a numeric variable.\n- **Describe spread** of a numeric variable.\n- **Read plots** for one variable.\n- **Create plots** displaying one variable in `ggplot2` package.\n- **Understand** what type of **variation occurs within** your variables.\n:::\n\n## Organize your work in scripts\n\n:::: {.columns}\n::: {.column width=40%}\n```{.r filename=\"dartpoints.r\"}\n# Analysis of dartpoints data set\n# 6. 3. 2024\n\nlibrary(ggplot2)\n\n# data -------------------------------\n# read data from CSV\n# url: https://petrpajdla.github.io/stat4arch/lect/w02/data/dartpoints.csv\ndartpoints <- read.csv(\"dartpoints2.csv\")\n\n# structure --------------------------\ncolnames(dartpoints)\nnrow(dartpoints)\nncol(dartpoints)\nstr(dartpoints)\n\nmean(dartpoints$Length)\n\n# plots ------------------------------\nggplot(data = dartpoints) +\n  aes(x = Length) +\n  geom_histogram() +\n  labs(x = \"Length (cm)\", y = \"Count\")\n  \n  \n  \n```\n:::\n::: {.column width=60% .incremental .fragment}\n**In RStudio...**\n\n- Create a new script with *Ctrl + Shift + n*\n- Put some basic info on what are you doing at the top.  \n  **Use comments** `#` (*Ctrl + Shift + c*) to write notes.  \n  Comment on the **why**, not the **what**.\n- **Divide the code** into sections with *Ctrl + Shift + r*  \n  `# Section name ----`\n- Load the packages you use at the top of the script.\n- RStudio will give you **hints**, hit *Tab* to autocomplete function calls.\n- **Execute the current line** with *Ctr + Enter* \n- Source the whole script with *Ctrl + Shift + Enter*\n:::\n::::\n\n## Organize your work in projects\n\n:::: {.columns}\n::: {.column width=40%}\n- Each project is in a **separate directory**.\n- There are **subdirectories** for different parts of the project.\n```\nMyProject/\n  code/\n    script1.R\n    script2.R\n  data/\n    dartpoints.csv\n  plots/\n    plot1.png\n    plot2.pdf\n  MyProject.Rproj\n```\n- In RStudio go to *Files* > *New Project*\n  \n![](./figs/dirstr.png)  \n\n:::\n::: {.column width=60% .fragment}\n### Paths \n\n::: {.fragment}\n**Absolute** file path  \nThe file path is specific to a given user.  \n```\nC:/Documents/MyProject/data/dartpoints.csv\n```\n:::\n\n::: {.fragment}\n**Relative** file path  \nIf I am currently in MyProject/ folder:\n```\n./data/dartpoints.csv\n```\n:::\n\n::: {.fragment}\nPackage `here` is here to save the day!\n\n- Do not forget to install the package first.\n- Load it at the top of your script.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"here\")\nlibrary(here)\n```\n:::\n\n\n\n\n- Function `here()` will know where the top directory is.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read data ----\ndartpoints <- read_csv(here(\"data/dartpoints.csv\"))\n```\n:::\n\n\n\n:::\n:::\n::::\n\n\n## Descriptive Statistics {background-color=\"#B5E2FF\"}\n\n## Characterizing centrality\n\n### Mean (*průměr*)\n`mean(x)`  \n$$ \\overline{x} = \\frac{x_1 + x_2 + \\cdots + x_n}{n} = \\frac{1}{n} (\\sum^n_{i=1}x_i) $$\n\n:::{.fragment}\n### Median (*medián*)\n`median(x)`  \n- **Robust**, minimizes influence of outliers.\n:::\n\n::: {.fragment}\n### What are outliers? (*odlehlé hodnoty*)\n- **Outliers** are data points that significantly differ from other observations. \n- May indicate a measurement error, an exceptional observation, etc.\n:::\n\n## Characterizing centrality\n\n![Various plots of a normal distribution](./figs/normal_distribution.png)\n\n\n## Characterizing dispersion and/or spread\n\n### Range (*rozpětí*)  \n`max(x) - min(x)` or `range(x)`\n\n::: {.fragment}\n### Variance and Standard deviation (*rozptyl* a *směrodatná odchylka*)\n`sd(x)`  \n$$ \\sigma = \\sqrt{s^2} = \\sqrt{\\frac{\\sum(x_i-\\overline{x})^2}{n-1}} $$\n:::\n\n::: {.fragment}\n### Interquartile range (midspread, IQR, *kvantil*, *mezikvartilové rozpětí*)\n`IQR(x)`  \n- **Robust**, minimizes influence of outliers.\n:::\n\n\n## Characterizing dispersion and/or spread\n\n![Various plots of a normal distribution](./figs/normal_distribution.png)\n\n## Exercise {background-color=\"#B5E2FF\"}\n\n::: {.incremental}\n- Start *RStudio*.\n- Create a new project, save it somewhere you can find it.\n- Use dataset [{{< bi file-earmark-arrow-down >}} dartpoints2.csv](./data/dartpoints2.csv).\n- Save it in your project directory.\n- Load the data from the CSV file.\n- {{< bi lightbulb >}} What is the column separator?\n- {{< bi lightbulb >}} How are NAs represented?\n- Explore the dataset.\n- Count mean and median **weight**, how do they differ?\n- What is the range of the weights?\n- What is the standard deviation of weights? What does it mean?\n- Count the IQR. Compare it with standard deviation.\n- {{< bi lightbulb >}} Hints: `read.csv2(path, na.strings)`, `str()`, `colnames()`, `mean()`, `median()`, `range()`, `sd()`, `IQR()`, `summary()`\n:::\n\n## Solution {background-color=\"#B5E2FF\"}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# dartpoints <- read.csv2(here::here(\"dartpoints2.csv\"), na.strings = \"-\")\ncolnames(dartpoints)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Name\"      \"Catalog\"   \"TARL\"      \"Quad\"      \"Length\"    \"Width\"    \n [7] \"Thickness\" \"B.Width\"   \"J.Width\"   \"H.Length\"  \"Weight\"    \"Blade.Sh\" \n[13] \"Base.Sh\"   \"Should.Sh\" \"Should.Or\" \"Haft.Sh\"   \"Haft.Or\"  \n```\n\n\n:::\n\n```{.r .cell-code}\ndartpoints$Weight\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]  3.6  4.5  3.6  4.0  2.3  3.0  3.9  6.2  5.1  2.8  2.5  4.8  3.2  3.8  4.5\n[16]  4.4  2.5  2.3  4.2  3.3  3.6  7.4  5.6  4.8  7.8  9.2  6.2  4.3  4.6  5.4\n[31]  5.9  5.1  4.7  7.2  2.5  3.9  4.1  7.2 10.7 12.5 13.4 11.1  7.2 28.8 13.9\n[46]  9.4  5.3  7.9  7.3 12.2  9.3 11.1 14.8 10.7 11.1 12.3 13.1  6.1  9.2  9.4\n[61]  6.7 15.3 15.1  4.6  4.3 11.6 10.5  6.8  9.1  9.4  9.5 10.4  7.5  8.7  6.9\n[76] 15.0 11.4  6.3  7.5  5.9  5.4  9.5  5.4  7.1  9.7 12.6 10.5  5.6  4.9  5.2\n[91] 16.3\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7.642857\n```\n\n\n:::\n\n```{.r .cell-code}\nmedian(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 6.8\n```\n\n\n:::\n\n```{.r .cell-code}\nmax(dartpoints$Weight) - min(dartpoints$Weight) # or range(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 26.5\n```\n\n\n:::\n\n```{.r .cell-code}\nsd(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4.207088\n```\n\n\n:::\n\n```{.r .cell-code}\nIQR(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5.5\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(dartpoints$Weight)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  2.300   4.550   6.800   7.643  10.050  28.800 \n```\n\n\n:::\n:::\n\n\n\n\n## Brainstorming {background-color=\"#FAF1A4\"}\n\n- Why do we visualize data?\n- What elements does a *good* graph contain?\n- How are these elements called?\n\n![Boxplots from Carlson 2017](./figs/boxplot_carlson-rmbg.png)\n\n\n## Plots for one variable {background-color=\"#B5E2FF\"}\n\n## Histogram\n\n- **Distribution** of values of a **quantitative** variable.\n\nDistribution of dart point weights.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-5-1.pdf)\n:::\n:::\n\n\n\n\n## Histogram\n\n- **Distribution** of values of a **quantitative** variable.\n\nDistribution of dart point weights, one column (*bin*) equals 2 g.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-6-1.pdf)\n:::\n:::\n\n\n\n\n## Density plot\n\n- **Distribution** of values of a **quantitative** variable.\n\nDistribution of dart point weights.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-7-1.pdf)\n:::\n:::\n\n\n\n\n## Density plot\n\n- **Distribution** of values of a **quantitative** variable, great for **comparisons**.\n\nDistribution of different types of dart points by weight.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-8-1.pdf)\n:::\n:::\n\n\n\n\n## Bar chart\n\n- **Distribution** of values of a **qualitative** variable.\n\nDistribution of types of dart points. \n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-9-1.pdf)\n:::\n:::\n\n\n\n\n## Plots in ggplot2 package {background-color=\"#B5E2FF\"}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1|3|5|6|7|\"}\ninstall.packages(\"ggplot2\") # <1>\n\nlibrary(ggplot2) # <2>\n\nggplot(data = <your data frame>) + # <3>\n  aes(x = <variable to be mapped to axis x>) + # <4>\n  geom_<geometry>() # <5>\n```\n:::\n\n\n\n\n1. Install the package `ggplot2`, do this only once.  \n2. Load the package from the library of installed packages, do this for every new script.  \n   (Calls to `library()` function are usually written at the top of the script.)  \n3. Function `ggplot()` takes the data frame as an argument.  \n4. Function `aes()` serves to map *aesthetics* (axis x and y, colors etc.) to different variables from your data frame.  \n5. Functons with `geom_` prefix are *geometries*, ie. types of plots to draw.  \n\n::: {.fragment}\nGeoms for one variable:\n\n- `geom_histogram()`\n- `geom_density()`\n- `geom_bar()`\n:::\n\n## Layers of ggplot2 {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints)\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Layers of ggplot2 {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) +\n  aes(x = Name)\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Layers of ggplot2 {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) +\n  aes(x = Name) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-13-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Bar chart {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) +\n  aes(x = Name) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-14-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Bar chart {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) +\n  aes(x = Name, color = Name) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-15-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Bar chart {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) +\n  aes(x = Name, color = Name, fill = Name) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-16-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Bar chart {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dartpoints) + \n  aes(x = Name, fill = Name) + \n  geom_bar(color = \"black\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-17-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Histogram {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-18-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Histogram {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5)\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-19-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Histogram {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-20-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Histogram {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\", fill = \"white\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-21-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Density plot {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) + \n  geom_density()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-22-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Density plot {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length, color = Name) + \n  geom_density()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-23-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Density plot {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length, color = Name, fill = Name) + \n  geom_density()\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-24-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Density plot {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) + \n  aes(x = Length, color = Name, fill = Name) + \n  geom_density(alpha = 0.4)\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-25-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Labels {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\", fill = \"white\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-26-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Labels {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\", fill = \"white\") +\n  labs(x = \"Length (cm)\", y = \"Count\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-27-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Labels {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\", fill = \"white\") +\n  labs(x = \"Length (cm)\", y = \"Count\",\n       title = \"Histogram of dart point lengths\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-28-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Labels {auto-animate=true}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(dartpoints) +\n  aes(x = Length) +\n  geom_histogram(binwidth = 5, color = \"black\", fill = \"white\") +\n  labs(x = \"Length (cm)\", y = \"Count\",\n       title = \"Histogram of dart point lengths\", \n       caption = \"Data adapted from archdata R package, Carlson 2017\")\n```\n\n::: {.cell-output-display}\n![](distribs_files/figure-pdf/unnamed-chunk-29-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n## Exercises {background-color=\"#B5E2FF\"}\n\n## Assignments {background-color=\"#BEFAB4\"}\n\n- Read [Make a plot](https://socviz.co/makeplot.html#makeplot) chapter in *Data Visualization* book by K. J. Healy.\n\n### Optional \n\n- Go through *Visualize data* tutorials [here](https://posit.cloud/learn/recipes).\n",
    "supporting": [
      "distribs_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}